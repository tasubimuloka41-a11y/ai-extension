# Инструкция по настройке

## Быстрый старт

### 1. Создание иконок

Создайте три иконки размером 16x16, 48x48 и 128x128 пикселей и сохраните их в папке `icons/`:
- `icon16.png`
- `icon48.png`
- `icon128.png`

Вы можете использовать любой графический редактор или онлайн-генераторы:
- https://www.favicon-generator.org/
- https://realfavicongenerator.net/

### 2. Настройка Google Drive API

1. Перейдите на https://console.cloud.google.com/
2. Создайте новый проект
3. Включите "Google Drive API"
4. Перейдите в "Учетные данные" → "Создать учетные данные" → "Идентификатор клиента OAuth 2.0"
5. Выберите тип приложения: "Chrome Extension"
6. Скопируйте Client ID
7. Откройте `manifest.json` и замените `YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com` на ваш Client ID

### 3. Настройка локальной модели

Убедитесь, что ваша модель Gemma 3 12B запущена и доступна через API.

#### Если используете Ollama:

```bash
# Установите Ollama (если еще не установлен)
# https://ollama.ai/

# Запустите модель
ollama pull gemma2:12b
ollama serve
```

API будет доступен на `http://localhost:11434`

#### Если используете другой сервер:

Настройте ваш сервер для работы с OpenAI-совместимым API форматом.

### 4. Установка расширения

1. Откройте Chrome/Edge
2. Перейдите на `chrome://extensions/` (или `edge://extensions/`)
3. Включите "Режим разработчика" (Developer mode)
4. Нажмите "Загрузить распакованное расширение" (Load unpacked)
5. Выберите папку с расширением

### 5. Первая настройка

1. Откройте расширение (кликните на иконку в панели инструментов)
2. Нажмите на кнопку настроек (шестеренка)
3. Введите URL вашего API:
   - Для Ollama: `http://localhost:11434`
   - Для других серверов: ваш URL (например: `http://localhost:8000`)
4. Нажмите на иконку Google Drive для подключения
5. Разрешите доступ к Google Drive

## Проверка работы

1. Откройте расширение
2. Введите тестовый запрос, например: "Привет, как дела?"
3. Дождитесь ответа от модели
4. Попробуйте загрузить файл через кнопку "+"
5. Попробуйте кликнуть на ссылку в ответе AI

## Устранение проблем

### Модель не отвечает

- Проверьте, что модель запущена
- Проверьте URL в настройках расширения
- Откройте консоль разработчика (F12) и проверьте ошибки
- Убедитесь, что API использует правильный формат запросов

### Google Drive не подключается

- Проверьте Client ID в manifest.json
- Убедитесь, что Google Drive API включен в консоли
- Проверьте разрешения расширения

### Ссылки не открываются

- Убедитесь, что расширение имеет разрешение на доступ к вкладкам
- Проверьте консоль на наличие ошибок

## Формат API

Расширение ожидает OpenAI-совместимый формат:

**Запрос:**
```json
POST /v1/chat/completions
{
  "model": "gemma-3-12b",
  "messages": [
    {
      "role": "user",
      "content": "Ваш запрос"
    }
  ],
  "temperature": 0.7,
  "max_tokens": 2000
}
```

**Ответ:**
```json
{
  "choices": [
    {
      "message": {
        "content": "Ответ модели"
      }
    }
  ]
}
```

## Дополнительные настройки

Вы можете изменить настройки по умолчанию в `background.js`:
- `DEFAULT_Gemma_API_URL` - URL API по умолчанию
- Параметры запроса (temperature, max_tokens) в функции `handleGemmaRequest`

